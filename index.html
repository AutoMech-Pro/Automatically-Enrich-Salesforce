<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automating Salesforce Enrichment with n8n & AI</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Palette: Neon Cyber-Blue
         Primary: #3B82F6 (Blue-500)
         Accent: #F43F5E (Rose-500)
         Dark: #0F172A (Slate-900)
         Light: #F8FAFC (Slate-50)
         Chart Colors: 
            Blue: rgba(59, 130, 246, 0.8)
            Pink: rgba(244, 63, 94, 0.8)
            Purple: rgba(139, 92, 246, 0.8)
            Teal: rgba(20, 184, 166, 0.8)
    -->

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8FAFC;
            color: #1E293B;
        }

        /* Chart Container Logic */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px; /* Max width constraint */
            margin-left: auto;
            margin-right: auto;
            height: 350px; /* Base height */
            max-height: 400px;
        }
        
        @media (max-width: 640px) {
            .chart-container {
                height: 300px;
            }
        }

        /* Custom Flowchart styling (No SVG/Mermaid) */
        .flow-node {
            transition: all 0.3s ease;
        }
        .flow-node:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .flow-arrow {
            font-size: 2rem;
            color: #94A3B8;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Card Elevation */
        .card-material {
            background: white;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            transition: transform 0.2s;
        }
        .card-material:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
    
    <!-- 
        PLAN SUMMARY:
        1. Narrative: Problem (Manual Work) -> Solution (n8n Architecture) -> Deep Dive (The 4 Phases) -> Result (Efficiency).
        2. Visualizations:
           - Efficiency Comparison (Bar Chart): ROI Hook.
           - Workflow Architecture (HTML/CSS Diagram): Replaces Mermaid.
           - Enrichment Method Trade-off (Radar Chart): Google vs Apify.
           - AI Data Extraction (Doughnut Chart): Value of fields.
        3. Compliance: No SVG, No Mermaid, Chart.js used, Palette applied.
    -->
</head>
<body class="antialiased">

    <!-- Header / Hero Section -->
    <header class="bg-[#0F172A] text-white py-12 px-4 sm:px-6 lg:px-8 shadow-lg">
        <div class="max-w-7xl mx-auto text-center">
            <h1 class="text-4xl sm:text-5xl font-extrabold tracking-tight mb-4">
                <span class="text-[#3B82F6]">Automate</span> Salesforce Enrichment
            </h1>
            <p class="text-xl sm:text-2xl text-gray-300 max-w-3xl mx-auto">
                Turn raw leads into gold with Web Crawling, LinkedIn Data, and GPT-4 intelligence.
            </p>
            <div class="mt-8 flex justify-center space-x-4">
                <div class="bg-[#1E293B] p-4 rounded-lg border border-[#3B82F6]">
                    <span class="block text-3xl font-bold text-[#3B82F6]">0</span>
                    <span class="text-sm text-gray-400">Manual Hours</span>
                </div>
                <div class="bg-[#1E293B] p-4 rounded-lg border border-[#F43F5E]">
                    <span class="block text-3xl font-bold text-[#F43F5E]">24/7</span>
                    <span class="text-sm text-gray-400">Always On</span>
                </div>
                <div class="bg-[#1E293B] p-4 rounded-lg border border-[#10B981]">
                    <span class="block text-3xl font-bold text-[#10B981]">100%</span>
                    <span class="text-sm text-gray-400">Enriched</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content Container -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 space-y-16">

        <!-- SECTION 1: The Efficiency Gap (Bar Chart) -->
        <section>
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold text-gray-900">Why Automate Enrichment?</h2>
                <p class="mt-4 text-lg text-gray-600 max-w-2xl mx-auto">
                    Manual research is slow and prone to error. Automating with n8n drastically reduces the time per lead, allowing sales teams to focus on closing deals rather than data entry.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                <div class="card-material p-6">
                    <h3 class="text-xl font-semibold mb-4 text-gray-800 border-l-4 border-[#F43F5E] pl-3">Time Per Lead</h3>
                    <div class="chart-container">
                        <canvas id="efficiencyChart"></canvas>
                    </div>
                </div>
                <div class="space-y-6">
                    <div class="bg-white p-6 rounded-lg shadow-sm border-l-4 border-[#3B82F6]">
                        <h4 class="text-lg font-bold text-[#3B82F6] mb-2">‚ö° Speed</h4>
                        <p class="text-gray-600">Manual research takes ~15 minutes per account. Automation finishes in under 30 seconds.</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-sm border-l-4 border-[#10B981]">
                        <h4 class="text-lg font-bold text-[#10B981] mb-2">üíé Quality</h4>
                        <p class="text-gray-600">Unified JSON schema ensures every record has the same high-quality data format, unlike human entry.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 2: The Workflow Architecture (HTML Flowchart) -->
        <section class="bg-gray-100 rounded-2xl p-8 shadow-inner">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold text-gray-900">The Automation Pipeline</h2>
                <p class="mt-4 text-lg text-gray-600">
                    A linear, four-stage process that transforms a simple Account Name into a complete business profile.
                </p>
            </div>

            <!-- HTML/CSS Flowchart (No Mermaid/SVG) -->
            <div class="flex flex-col md:flex-row justify-between items-center space-y-6 md:space-y-0 md:space-x-4">
                
                <!-- Step 1 -->
                <div class="flex-1 w-full">
                    <div class="flow-node bg-white p-6 rounded-xl border-t-8 border-[#3B82F6] shadow-md text-center h-full">
                        <div class="text-4xl mb-3">‚ö°</div>
                        <h3 class="font-bold text-lg text-gray-800">1. Trigger</h3>
                        <p class="text-sm text-gray-500 mt-2">Salesforce Account Created</p>
                        <div class="mt-3 bg-blue-50 text-blue-700 text-xs py-1 px-2 rounded inline-block">Event Listener</div>
                    </div>
                </div>

                <!-- Arrow -->
                <div class="flow-arrow transform rotate-90 md:rotate-0">
                    &#10132;
                </div>

                <!-- Step 2 -->
                <div class="flex-1 w-full">
                    <div class="flow-node bg-white p-6 rounded-xl border-t-8 border-[#F43F5E] shadow-md text-center h-full">
                        <div class="text-4xl mb-3">üîç</div>
                        <h3 class="font-bold text-lg text-gray-800">2. Discovery</h3>
                        <p class="text-sm text-gray-500 mt-2">Web Crawl & LinkedIn Search</p>
                        <div class="mt-3 bg-red-50 text-red-700 text-xs py-1 px-2 rounded inline-block">Multi-Source</div>
                    </div>
                </div>

                <!-- Arrow -->
                <div class="flow-arrow transform rotate-90 md:rotate-0">
                    &#10132;
                </div>

                <!-- Step 3 -->
                <div class="flex-1 w-full">
                    <div class="flow-node bg-white p-6 rounded-xl border-t-8 border-[#8B5CF6] shadow-md text-center h-full">
                        <div class="text-4xl mb-3">üß†</div>
                        <h3 class="font-bold text-lg text-gray-800">3. Intelligence</h3>
                        <p class="text-sm text-gray-500 mt-2">GPT-4 Analysis</p>
                        <div class="mt-3 bg-purple-50 text-purple-700 text-xs py-1 px-2 rounded inline-block">AI Analyst</div>
                    </div>
                </div>

                <!-- Arrow -->
                <div class="flow-arrow transform rotate-90 md:rotate-0">
                    &#10132;
                </div>

                <!-- Step 4 -->
                <div class="flex-1 w-full">
                    <div class="flow-node bg-white p-6 rounded-xl border-t-8 border-[#10B981] shadow-md text-center h-full">
                        <div class="text-4xl mb-3">üíæ</div>
                        <h3 class="font-bold text-lg text-gray-800">4. Action</h3>
                        <p class="text-sm text-gray-500 mt-2">Update Salesforce</p>
                        <div class="mt-3 bg-green-50 text-green-700 text-xs py-1 px-2 rounded inline-block">Write Back</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 3: Deep Dive - Discovery & Intelligence -->
        <section>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                
                <!-- Left Col: Method Comparison (Radar) -->
                <div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">Discovery: Choosing a Strategy</h3>
                    <p class="text-gray-600 mb-6">
                        You can enrich data using a simple Google "Search & Infer" method or a "Deep Scrape" using tools like Apify. The choice depends on your budget and data fidelity needs.
                    </p>
                    <div class="card-material p-6">
                        <h4 class="text-center font-bold text-gray-700 mb-4">Method Comparison</h4>
                        <div class="chart-container">
                            <canvas id="methodRadarChart"></canvas>
                        </div>
                    </div>
                    <div class="mt-6 text-sm text-gray-500 flex justify-between px-4">
                        <span><strong class="text-[#3B82F6]">Search & Infer:</strong> Low cost, faster, less detail.</span>
                        <span><strong class="text-[#F43F5E]">Deep Scrape:</strong> Higher cost, slower, rich data.</span>
                    </div>
                </div>

                <!-- Right Col: AI Output (Doughnut) -->
                <div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">Intelligence: What GPT-4 Extracts</h3>
                    <p class="text-gray-600 mb-6">
                        We don't just dump text. GPT-4 acts as an analyst, extracting specific structured fields from the raw web and LinkedIn data to populate your CRM.
                    </p>
                    <div class="card-material p-6">
                        <h4 class="text-center font-bold text-gray-700 mb-4">Enrichment Field Coverage</h4>
                        <div class="chart-container">
                            <canvas id="aiOutputChart"></canvas>
                        </div>
                    </div>
                    <!-- Legend List -->
                    <div class="mt-6 grid grid-cols-2 gap-4">
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 rounded-full bg-[#3B82F6]"></div>
                            <span class="text-sm text-gray-700">Industry Niche</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 rounded-full bg-[#F43F5E]"></div>
                            <span class="text-sm text-gray-700">Company Size</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 rounded-full bg-[#8B5CF6]"></div>
                            <span class="text-sm text-gray-700">Tech Stack</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 rounded-full bg-[#10B981]"></div>
                            <span class="text-sm text-gray-700">Executive Summary</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 4: Setup Guide Table -->
        <section>
             <div class="text-center mb-10">
                <h2 class="text-3xl font-bold text-gray-900">Essential Configuration</h2>
                <p class="mt-4 text-lg text-gray-600">
                    Key settings required in n8n to ensure the workflow runs smoothly without hitting limits.
                </p>
            </div>

            <div class="overflow-hidden card-material">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Node / Stage</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Configuration</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Why It Matters</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap font-medium text-gray-900">HTTP Request</td>
                            <td class="px-6 py-4 text-gray-600">Limit Web Crawl Chars</td>
                            <td class="px-6 py-4 text-sm text-gray-500">Prevents GPT-4 token overflow costs.</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap font-medium text-gray-900">OpenAI Node</td>
                            <td class="px-6 py-4 text-gray-600">JSON Mode On</td>
                            <td class="px-6 py-4 text-sm text-gray-500">Guarantees code-readable output for Salesforce.</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap font-medium text-gray-900">Salesforce Node</td>
                            <td class="px-6 py-4 text-gray-600">Account ID Mapping</td>
                            <td class="px-6 py-4 text-sm text-gray-500">Ensures the update targets the correct record.</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap font-medium text-gray-900">Wait Node</td>
                            <td class="px-6 py-4 text-gray-600">Add 2-5s Delay</td>
                            <td class="px-6 py-4 text-sm text-gray-500">Avoids API rate limits during bulk updates.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Footer -->
        <footer class="bg-[#0F172A] text-white py-8 mt-12 text-center">
            <p class="text-sm opacity-70">
                Created for n8n Automation Tutorial | Data Source: Workflow Guide
            </p>
        </footer>
    </main>

    <!-- SCRIPTS -->
    <script>
        // --- UTILITY: Wrap Labels for Chart.js (Strict 16 char limit) ---
        function formatLabel(str, maxwidth) {
            if (typeof str !== 'string') return str;
            if (str.length <= maxwidth) return str;
            
            const words = str.split(' ');
            const lines = [];
            let currentLine = words[0];

            for (let i = 1; i < words.length; i++) {
                if (currentLine.length + 1 + words[i].length <= maxwidth) {
                    currentLine += " " + words[i];
                } else {
                    lines.push(currentLine);
                    currentLine = words[i];
                }
            }
            lines.push(currentLine);
            return lines;
        }

        // --- GLOBAL: Common Tooltip Configuration ---
        const commonTooltipConfig = {
            callbacks: {
                title: function(tooltipItems) {
                    const item = tooltipItems[0];
                    let label = item.chart.data.labels[item.dataIndex];
                    if (Array.isArray(label)) {
                        return label.join(' ');
                    } else {
                        return label;
                    }
                }
            }
        };

        // --- CHART 1: Efficiency Bar Chart ---
        const ctxEfficiency = document.getElementById('efficiencyChart').getContext('2d');
        const rawLabelsEfficiency = ['Manual Research (Mins)', 'n8n Automation (Mins)'];
        const formattedLabelsEfficiency = rawLabelsEfficiency.map(l => formatLabel(l, 16));

        new Chart(ctxEfficiency, {
            type: 'bar',
            data: {
                labels: formattedLabelsEfficiency,
                datasets: [{
                    label: 'Time Spent per Lead',
                    data: [15, 0.5],
                    backgroundColor: [
                        'rgba(244, 63, 94, 0.6)', // Pink for Manual (Bad/Slow)
                        'rgba(16, 185, 129, 0.8)' // Green for Auto (Good/Fast)
                    ],
                    borderColor: [
                        'rgba(244, 63, 94, 1)',
                        'rgba(16, 185, 129, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: commonTooltipConfig,
                    title: {
                        display: true,
                        text: 'Time Savings: 30x Faster'
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: { display: true, text: 'Minutes' }
                    }
                }
            }
        });

        // --- CHART 2: Radar Method Comparison ---
        const ctxRadar = document.getElementById('methodRadarChart').getContext('2d');
        const rawLabelsRadar = ['Setup Simplicity', 'Data Depth', 'Execution Speed', 'Cost Efficiency', 'Reliability'];
        const formattedLabelsRadar = rawLabelsRadar.map(l => formatLabel(l, 16));

        new Chart(ctxRadar, {
            type: 'radar',
            data: {
                labels: formattedLabelsRadar,
                datasets: [{
                    label: 'Method A: Search & Infer',
                    data: [9, 5, 8, 9, 6], // High Simplicity, Low Depth, High Speed, High Cost Efficiency
                    backgroundColor: 'rgba(59, 130, 246, 0.2)', // Blue
                    borderColor: 'rgba(59, 130, 246, 1)',
                    pointBackgroundColor: 'rgba(59, 130, 246, 1)',
                }, {
                    label: 'Method B: Deep Scrape',
                    data: [5, 9, 6, 6, 9], // Med Simplicity, High Depth, Med Speed, Med Cost
                    backgroundColor: 'rgba(244, 63, 94, 0.2)', // Pink
                    borderColor: 'rgba(244, 63, 94, 1)',
                    pointBackgroundColor: 'rgba(244, 63, 94, 1)',
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    tooltip: commonTooltipConfig,
                    legend: { position: 'bottom' }
                },
                scales: {
                    r: {
                        angleLines: { color: '#E2E8F0' },
                        grid: { color: '#E2E8F0' },
                        suggestedMin: 0,
                        suggestedMax: 10
                    }
                }
            }
        });

        // --- CHART 3: AI Output Doughnut ---
        const ctxOutput = document.getElementById('aiOutputChart').getContext('2d');
        const rawLabelsOutput = ['Industry Niche', 'Company Size', 'Tech Stack Used', 'Professional Summary', 'B2B vs B2C'];
        const formattedLabelsOutput = rawLabelsOutput.map(l => formatLabel(l, 16));

        new Chart(ctxOutput, {
            type: 'doughnut',
            data: {
                labels: formattedLabelsOutput,
                datasets: [{
                    label: 'Data Extraction Value',
                    data: [20, 20, 20, 20, 20], // Equal weight for visualization
                    backgroundColor: [
                        'rgba(59, 130, 246, 0.8)', // Blue
                        'rgba(244, 63, 94, 0.8)',  // Pink
                        'rgba(139, 92, 246, 0.8)', // Purple
                        'rgba(16, 185, 129, 0.8)', // Green
                        'rgba(245, 158, 11, 0.8)'  // Amber
                    ],
                    borderWidth: 0,
                    hoverOffset: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '65%',
                plugins: {
                    legend: { display: false }, // Custom legend used in HTML
                    tooltip: commonTooltipConfig,
                    title: {
                        display: true,
                        text: 'Structured JSON Fields'
                    }
                }
            }
        });

    </script>
</body>
</html>
